<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            #display {
                width: 300px;
                height: 200px;
                color: white;
                background-color: black;
            }
        </style>
        <script type="module">
            const display = document.getElementById("display");

            let pairingCode = "timmies";
            let url = `wss://localhost:3000/ws?group=${pairingCode}`;
            if (window.location.host != "localhost")
                url = `wss://this-is-wendys-socket-service-dkc8eyd7bzc9hndh.canadacentral-01.azurewebsites.net/ws?pair=${pairingCode}`;

            let ws = new WebSocket(url);

            ws.onopen = ev => {
                display.textContent = "Connection Opened";
                console.log("Opened connection");
                ws.send({
                    payload: "shitpost deez",
                    type: "string"
                });
                console.log("Sent data");
            };

            ws.onmessage = ev => {
                let jstring = JSON.stringify(ev.data);
                console.log("Received", jstring);
            }

            ws.onclose = ev => {
                console.log("Socket closed");
            }

        </script>
    </head>
    <body>
        <div id="display">

        </div>
    </body>
</html>